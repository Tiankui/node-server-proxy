<!DOCTYPE HTML>
<html>
  <head>
    <title>socket.io-demo</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <!-- 根据是否移动项目选择 -->
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=10,user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
      <script src="/socket.io/socket.io.js"></script>

  </head>
  <body>
  <input type="text" id="userInput"/>
  <input type="button" id="sendButton" onclick="send();"/>
  <div id ="userTalks" style="width:200px;height:100%">

  </div>
  <script>
      var socket = io.connect();
      //socket.emit('my event', 'Hello world.')
      socket.on('connect', function(){
          document.getElementById('userTalks').innerHTML = '连接成功';
          socket.emit('userLogin', {userName:'test', groupName: 'testGroup'}, function(response){
              document.getElementById('userTalks').innerHTML+= '<p>'+response.msg+'</p>';
          });

          socket.on('ready', function () {
              console.log('Connected !');
              socket.emit('msg', confirm('What is your message?'));
          });
          socket.on('sysinfo',function(data){
              console.log(data);
          });
          socket.on('userTalk',function(data){
              document.getElementById('userTalks').innerHTML+= '<p>'+data.text+'</p>';
          });
      });

      function send(){
          var inputTxt = document.getElementById('userInput').value;
          socket.emit('userTalk',{text:inputTxt});
      }


  </script>
  </body>
</html>
